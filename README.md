
 ... 이 사이트는 작업 중 ... 
<BR> ........ 편집 중 .........

# ArduBlocklyAndroid
Android app using Arduino-Blockly.



# 전체 시스템 구성

안드로이드 앱에서 작동하는 blockly 기반의 편집기에 아두이노와 연동하는 Javascript 기반의 대응 동작을 통해 작동한다.

![ArduBlockly_SysConfig](https://github.com/iblockly/ArduBlocklyAndroid/assets/160044072/f9204ce7-a21e-4e3c-8ff1-1af2e2717b5c)


## 안드로이드
- 'Blockly' 기반의 스크레치 기반의 블럭 코드를 입력하면
- 실행 시, Javascript 언어로 변환하여 코드를 생성한다.
- 자바스크립트 언어는 인터프리터에 의해 실행되면서 블루투스를 통해 아두이노와 상태 및 포트 명령을 전송하여 동작한다.

# 안드로이드 앱 실행을 위한 준비 
안드로이드 앱을 설치하고, 이 앱을 실행 전에 아두이노의 준비가 되어야 한다.
1. 안드로이드 앱을 설치한다. 
2. 아두이노에 블루투스 연결 전에 ‘arduino’ 폴더의 아두이노 코드를 업로드 한다.
3. 아두이노에 블루투스 모듈을 연결한다.
4. 안드로이드 앱을 실행하여 다음과 같은 실행과정을 통해 동작 시킨다.
- 원하는 블럭 코드를 입력하고 필요에 따라 저장을 한다.
- 클럭 코드를 완성했다면, 실행 버튼을 누른다.
- 블럭 코드에 따라 앱의 입출력 및 아두이노 입출력을 통해 원하는 기능이 작동하는지 확인한다.

## 안드로이드 앱 설치
--- 현재 구글의 ‘Play 스토어’에 안드로이드 앱을 등록 진행 중 ---

## 아두이노

- 아두이노에서 안드로이드와 연결하기 위해 블루투스를 사용한다. 
- 블두투스는 클래스 버전을 기반으로 연결하고 아두이노의 포트 상태를 연동한다.

### 아두이노-블루투스 연결

![ArduinoUNO-Bluetooth_Sch](https://github.com/iblockly/ArduBlocklyAndroid/assets/160044072/1f93ddc7-d7be-47df-a6eb-ad3d746f6047)


아두이노 UNO를 사용할 경우 그림과 같이 연결한다.  블루투스 전원은 사용하는 모듈의 전원을 확인하고 5V인가를 확인하고 다르다면 적당한 Vcc 전원을 선택하여 연결한다.
아두이노의 블루투스 연결에서 소프트웨어의 선택에서 ‘SoftwareSerial’ 라브러리를 사용할 경우 가끔 오류가 발생할 가능성이 있다. 따라서 USB 쪽에서 사용하는 포트0(RX),1(TX)와 중복 되므로 실행 과정에서 USB에 시리얼 통신을 사용하면 블루투스와 충돌이 일어나므로 통신을 사용하면 안된다. ‘arduino’ 폴더에 제공하는 코드에서는 블루투스 통신은 ‘Serial’ 클래스를 사용하였다.

